# Event sent when a new object is created
type AsterismCreated implements Event {
  # Newly created object
  value: Asterism!
  id: Long!
}

# Event sent when an object is edited
type AsterismEdited implements Event {
  # Previous value of the edited object
  oldValue: Asterism!

  # Updated value of the edited object
  newValue: Asterism!
  id: Long!
}

# RA/Dec Coordinates
input CoordinatesInput {
  ra: HmsString!
  dec: DmsString!
}

# Default asterism parameters
input CreateDefaultAsterismInput {
  programs: [ProgramId!]!
  explicitBase: CoordinatesInput
  targets: [TargetId!]!
}

# Nonsidereal target parameters
input CreateNonsiderealInput {
  pids: [ProgramId!]!
  name: String!
  key: EphemerisKeyType!
  des: String!
}

# Observation creation parameters
input CreateObservationInput {
  pid: ProgramId!
  name: String
  asterism: AsterismId
}

# Sidereal target parameters
input CreateSiderealInput {
  pids: [ProgramId!]!
  name: String!
  ra: HmsString!
  dec: DmsString!
  epoch: EpochString
  properVelocity: ProperVelocityInput
  radialVelocity: RadialVelocityString
}

# Default asterism edit
input EditDefaultAsterismInput {
  id: AsterismId!
  existence: Existence
  explicitBase: CoordinatesInput
  targets: [TargetId!]
}

# Edit observation
input EditObservationInput {
  id: ObservationId!
  existence: Existence
  name: String
  asterism: AsterismId
}

# Sidereal target edit parameters
input EditSiderealInput {
  id: TargetId!
  existence: Existence
  name: String
  ra: HmsString
  dec: DmsString
  epoch: EpochString
  properVelocity: ProperVelocityInput
  radialVelocity: RadialVelocityString
}

# Common fields shared by all events
interface Event {
  id: Long!
}

type Mutation {
  createDefaultAsterism(
    # Default Asterism description
    input: CreateDefaultAsterismInput!
  ): Asterism
  updateDefaultAsterism(
    # Edit default asterism
    input: EditDefaultAsterismInput!
  ): Asterism
  deleteAsterism(
    # Asterism ID
    id: AsterismId!
  ): Asterism
  undeleteAsterism(
    # Asterism ID
    id: AsterismId!
  ): Asterism
  createObservation(
    # Observation description
    input: CreateObservationInput!
  ): Observation
  updateObservation(
    # Edit observation
    input: EditObservationInput!
  ): Observation
  deleteObservation(
    # Observation ID
    id: ObservationId!
  ): Observation
  undeleteObservation(
    # Observation ID
    id: ObservationId!
  ): Observation
  createNonsiderealTarget(
    # Nonsidereal target description
    input: CreateNonsiderealInput!
  ): Target
  createSiderealTarget(
    # Sidereal target description
    input: CreateSiderealInput!
  ): Target
  updateSiderealTarget(
    # Sidereal target edit
    input: EditSiderealInput!
  ): Target
  deleteTarget(
    # Target ID
    id: TargetId!
  ): Target
  undeleteTarget(
    # Target ID
    id: TargetId!
  ): Target
}

# Event sent when a new object is created
type ObservationCreated implements Event {
  # Newly created object
  value: Observation!
  id: Long!
}

# Event sent when an object is edited
type ObservationEdited implements Event {
  # Previous value of the edited object
  oldValue: Observation!

  # Updated value of the edited object
  newValue: Observation!
  id: Long!
}

# Event sent when a new object is created
type ProgramCreated implements Event {
  # Newly created object
  value: Program!
  id: Long!
}

# Event sent when an object is edited
type ProgramEdited implements Event {
  # Previous value of the edited object
  oldValue: Program!

  # Updated value of the edited object
  newValue: Program!
  id: Long!
}

# ProperVelocity in RA and dec
input ProperVelocityInput {
  ra: RadialVelocityRaString!
  dec: RadialVelocityDecString!
}

type Subscription {
  asterismCreated: AsterismCreated!
  asterismEdited: AsterismEdited!
  observationCreated: ObservationCreated!
  observationEdited: ObservationEdited!
  programCreated: ProgramCreated!
  programEdited: ProgramEdited!
  targetCreated: TargetCreated!
  targetEdited: TargetEdited!
}

# Event sent when a new object is created
type TargetCreated implements Event {
  # Newly created object
  value: Target!
  id: Long!
}

# Event sent when an object is edited
type TargetEdited implements Event {
  # Previous value of the edited object
  oldValue: Target!

  # Updated value of the edited object
  newValue: Target!
  id: Long!
}

# Common fields shared by all asterisms
interface Asterism {
  # Asterism ID
  id: AsterismId!

  # Whether the asterism is deleted or present
  existence: Existence!

  # When set, overrides the default base position of the asterism
  explicitBase: Coordinates

  # All asterism targets
  targets(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Target!]!
}

# AsterismId id formatted as `a-(0|[1-9a-f][0-9a-f]*)`
scalar AsterismId

type Coordinates {
  # Right Ascension
  ra: RightAscension!

  # Declination
  dec: Declination!
}

type Declination {
  # Declination in DD:MM:SS.SS format
  dms: DmsString!

  # Declination in signed degrees
  degrees: Float!

  # Declination in signed µas
  microarcsecs: Long!
}

# Target declination coordinate in format '[+/-]DD:MM:SS.sss'
scalar DmsString

# Ephemeris key type options
enum EphemerisKeyType {
  # EphemerisKeyType Comet
  COMET

  # EphemerisKeyType AsteroidNew
  ASTEROID_NEW

  # EphemerisKeyType AsteroidOld
  ASTEROID_OLD

  # EphemerisKeyType MajorBody
  MAJOR_BODY

  # EphemerisKeyType UserSupplied
  USER_SUPPLIED
}

# Reference observation epoch in format '[JB]YYYY.YYY'
scalar EpochString

# State of being: either Deleted or Present
enum Existence {
  # Existence Present
  PRESENT

  # Existence Deleted
  DELETED
}

# Target right ascension coordinate in format 'HH:MM:SS.sss'
scalar HmsString

type Nonsidereal {
  # Human readable designation that discriminates among ephemeris keys of the same type.
  des: String!

  # Nonsidereal target lookup type.
  keyType: EphemerisKeyType!
}

type Observation {
  # Observation ID
  id: ObservationId!

  # Deleted or Present
  existence: Existence!

  # Observation name
  name: String

  # The program that contains this observation
  program(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): Program!

  # The observation's asterism, if any
  asterism(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): Asterism

  # The observation's targets, if any
  targets(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Target!]!
}

# ObservationId id formatted as `o-(0|[1-9a-f][0-9a-f]*)`
scalar ObservationId

type Program {
  # Program ID
  id: ProgramId!

  # Deleted or Present
  existence: Existence!

  # Program name
  name: String

  # All asterisms associated with the program (needs pagination).
  asterisms(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Asterism!]!

  # All observations associated with the program (needs pagination).
  observations(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Observation!]!

  # All targets associated with the program (needs pagination).
  targets(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Target!]!
}

# ProgramId id formatted as `p-(0|[1-9a-f][0-9a-f]*)`
scalar ProgramId

type ProperVelocity {
  # Proper velocity in RA, signed decimal milliarcseconds per year (mas/y)
  ra: RadialVelocityRaString!

  # Proper velocity in dec, signed decimal milliarcseconds per year (mas/y)
  dec: RadialVelocityDecString!
}

type Query {
  # Returns all asterisms associated with the given program.
  asterisms(
    # Program ID
    id: ProgramId!

    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Asterism!]!

  # Returns the asterism with the given id, if any.
  asterism(
    # Asterism ID
    id: AsterismId!

    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): Asterism

  # Returns all observations associated with the given program.
  observations(
    # Program ID
    id: ProgramId!

    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Observation!]!

  # Returns the observation with the given id, if any.
  observation(
    # Observation ID
    id: ObservationId!

    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): Observation

  # Returns all programs (needs pagination).
  programs(
    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Program!]!

  # Returns the program with the given id, if any.
  program(
    # Program ID
    id: ProgramId!

    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): Program

  # Return all targets associated with the given program.
  targets(
    # Program ID
    id: ProgramId!

    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): [Target!]!

  # Returns the target with the given id, if any.
  target(
    # Target ID
    id: TargetId!

    # Set to true to include deleted values
    includeDeleted: Boolean! = false
  ): Target
}

# ProperVelocity in Dec as signed decimal milliarcseconds per year in format 'signed decimal milliarcseconds per year (mas/y)'
scalar RadialVelocityDecString

# ProperVelocity in RA as signed decimal milliarcseconds per year in format 'signed decimal milliarcseconds per year (mas/y)'
scalar RadialVelocityRaString

# Radial velocity m/s in format 'meters per second'
scalar RadialVelocityString

type RightAscension {
  # Right Ascension (RA) in HH:MM:SS.SSS format
  hms: HmsString!

  # Right Ascension (RA) in hours
  hours: Float!

  # Right Ascension (RA) in degrees
  degrees: Float!

  # Right Ascension (RA) in µas
  microarcsecs: Long!
}

type Sidereal {
  # Coordinates at epoch
  coordinates: Coordinates!

  # Epoch, time of base observation
  epoch: EpochString!

  # Proper velocity per year in right ascension and declination
  properVelocity: ProperVelocity

  # Radial velocity in m/s
  radialVelocity: RadialVelocityString
}

type Target {
  # Target id.
  id: TargetId!

  # Deleted or Present
  existence: Existence!

  # The program associated with the target.
  programs: [Program!]!

  # Target name.
  name: String!

  # Information required to find a target in the sky.
  tracking: Tracking!
}

# TargetId id formatted as `t-(0|[1-9a-f][0-9a-f]*)`
scalar TargetId

# Either Nonsidereal ephemeris lookup key or Sidereal proper motion.
union Tracking = Nonsidereal | Sidereal

# The `Long` scalar type represents non-fractional signed whole numeric values. Long can represent values between -(2^63) and 2^63 - 1.
scalar Long
